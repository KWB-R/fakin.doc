<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>FAKIN Documentation Index</title>
  <meta name="description" content="FAKIN Projektdokumentation">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="FAKIN Documentation Index" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://kwb-r.github.io/fakin.doc" />
  
  <meta property="og:description" content="FAKIN Projektdokumentation" />
  <meta name="github-repo" content="kwb-r/fakin.doc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="FAKIN Documentation Index" />
  
  <meta name="twitter:description" content="FAKIN Projektdokumentation" />
  

<meta name="author" content="Hauke Sonnenberg">


<meta name="date" content="2018-06-04">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="projektbausteine.html">
<link rel="next" href="loesungen.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">FAKIN Projekt-Dokumentation</a></li>

<li class="divider"></li>
<li class="part"><span><b>I FAKIN-Dokumentation</b></span></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Einführung</a></li>
<li class="chapter" data-level="2" data-path="projektbeschreibungen.html"><a href="projektbeschreibungen.html"><i class="fa fa-check"></i><b>2</b> Projektbeschreibungen</a><ul>
<li class="chapter" data-level="2.1" data-path="projektbeschreibungen.html"><a href="projektbeschreibungen.html#projektgruppen"><i class="fa fa-check"></i><b>2.1</b> Projektgruppen</a></li>
<li class="chapter" data-level="2.2" data-path="projektbeschreibungen.html"><a href="projektbeschreibungen.html#projekt-spree2011-2007"><i class="fa fa-check"></i><b>2.2</b> Projekt: Spree2011 (2007)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="projektbausteine.html"><a href="projektbausteine.html"><i class="fa fa-check"></i><b>3</b> Projektbausteine</a><ul>
<li class="chapter" data-level="3.1" data-path="projektbausteine.html"><a href="projektbausteine.html#monitoring"><i class="fa fa-check"></i><b>3.1</b> Monitoring</a></li>
<li class="chapter" data-level="3.2" data-path="projektbausteine.html"><a href="projektbausteine.html#thema-kanalnetzmodellierung-und--simulation"><i class="fa fa-check"></i><b>3.2</b> Thema: Kanalnetzmodellierung und -simulation</a><ul>
<li class="chapter" data-level="3.2.1" data-path="projektbausteine.html"><a href="projektbausteine.html#unterthema-modellkalibrierung"><i class="fa fa-check"></i><b>3.2.1</b> Unterthema: Modellkalibrierung</a></li>
<li class="chapter" data-level="3.2.2" data-path="projektbausteine.html"><a href="projektbausteine.html#beispielprojekte-kanalnetzmodellierung"><i class="fa fa-check"></i><b>3.2.2</b> Beispielprojekte Kanalnetzmodellierung:</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="projektbausteine.html"><a href="projektbausteine.html#datenimport"><i class="fa fa-check"></i><b>3.3</b> Datenimport</a></li>
<li class="chapter" data-level="3.4" data-path="projektbausteine.html"><a href="projektbausteine.html#fallbeispiel-lca-life-cycle-assessment-lebenszyklusbewertung"><i class="fa fa-check"></i><b>3.4</b> Fallbeispiel: LCA (Life Cycle Assessment = Lebenszyklusbewertung)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="problembereiche-problembereiche.html"><a href="problembereiche-problembereiche.html"><i class="fa fa-check"></i><b>4</b> Problembereiche {problembereiche}</a><ul>
<li class="chapter" data-level="4.1" data-path="problembereiche-problembereiche.html"><a href="problembereiche-problembereiche.html#zeitstempel"><i class="fa fa-check"></i><b>4.1</b> Zeitstempel</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="loesungen.html"><a href="loesungen.html"><i class="fa fa-check"></i><b>5</b> Konkrete Aufgaben und Lösungen</a><ul>
<li class="chapter" data-level="5.1" data-path="loesungen.html"><a href="loesungen.html#input-infoworks-regen"><i class="fa fa-check"></i><b>5.1</b> InfoWorks: Erzeugen von Regen-Inputdateien</a></li>
<li class="chapter" data-level="5.2" data-path="loesungen.html"><a href="loesungen.html#input-infoworks-rtc"><i class="fa fa-check"></i><b>5.2</b> InfoWorks: Erzeugen von Real Time Control (RTC)-Dateien</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">FAKIN Documentation Index</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="problembereiche-problembereiche" class="section level1">
<h1><span class="header-section-number">Kapitel 4</span> Problembereiche {problembereiche}</h1>
<div id="zeitstempel" class="section level2">
<h2><span class="header-section-number">4.1</span> Zeitstempel</h2>
<p><strong>Frage:</strong></p>
<p>Wie stellen wir die Messgeräte ein? Sollen sie die Uhr automatisch umstellen oder nicht?</p>
<p><strong>Diskussion:</strong></p>
<p>Aus Sicht der Datenverarbeitung bereitet uns die Umstellung von Winterzeit (= Normalzeit) auf Sommerzeit und von Sommerzeit auf Winterzeit immer wieder Schwierigkeiten. Warum?</p>
<p><strong>Umstellung von Winterzeit auf Sommerzeit</strong></p>
<p>Die Uhr wird um eine Stunde von 02:00 CET (<em>Central European Time</em>) auf 03:00 CEST (<em>Central European Summer Time</em>) <strong>vorgestellt</strong>. Merke: Die Stühle eines Cafés werden <strong>vor</strong> den Laden gestellt.</p>
<p>In einer Zeitreihe ergibt sich daraus am Tag der Zeitumstellung (z.B. am 25.03.2018) eine Lücke in den Zeitstempeln:</p>
<pre><code>2018-03-25 01:45:00 CET
2018-03-25 01:50:00 CET
2018-03-25 01:55:00 CET
2018-03-25 03:00:00 CEST
2018-03-25 03:05:00 CEST
2018-03-25 03:10:00 CEST</code></pre>
<p>Wenn die als Text vorliegenden Zeitstempel in einen numerischen Zeitstempel umgewandelt werden, gibt es, auch wenn die Angabe <code>CET</code> oder <code>CEST</code> fehlt, im Grunde kein Problem, da sie eindeutig sind. Voraussetzung ist, dass bei der Umwandlung angegeben wird, dass diese Zeitstempel in der Zeitzone “Europe/Berlin” (in der es Sommer- und Winterzeit gibt) aufgenommen wurden.</p>
<p>In der Programmiersprache R ist das auf unseren Rechnern das Standardverhalten, da die Zeitzone vom Betriebssystem abgefragt wird:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.POSIXct</span>(<span class="st">&quot;2018-03-25 01:55:00&quot;</span>)
## [1] &quot;2018-03-25 01:55:00 CET&quot;
<span class="kw">as.POSIXct</span>(<span class="st">&quot;2018-03-25 03:00:00&quot;</span>)
## [1] &quot;2018-03-25 03:00:00 CEST&quot;</code></pre></div>
<p>Interessant an dieser Stelle ist das Verhalten, wenn ein Zeitstempel, der in der Zeitzone “Europe/Berlin” nicht existiert, angegeben wird:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.POSIXct</span>(<span class="st">&quot;2018-03-25 02:30:00&quot;</span>)
## [1] &quot;2018-03-25 01:30:00 CET&quot;</code></pre></div>
<p>Leider tritt an dieser Stelle kein Fehler auf!</p>
<p><strong>Umstellung von Sommerzeit auf Winterzeit</strong></p>
<p>Die Uhr wird um 03:00 CEST wieder um eine Stunde auf die Normalzeit 02:00 CET <strong>zurückgestellt</strong>. Merke: Die Stühle werden wieder in den Laden <strong>zurück</strong> gestellt.</p>
<p>In einer Zeitreihe ergeben sich daraus am Tag der Zeitumstellung (z.B. am 28.10.2018) Duplikate in den Zeitstempeln:</p>
<pre><code>2018-10-28 02:15:00 CEST
2018-10-28 02:30:00 CEST
2018-10-28 02:45:00 CEST
2018-10-28 02:00:00 CET
2018-10-28 02:15:00 CET
2018-10-28 02:30:00 CET </code></pre>
<p>Ohne die Information <code>CEST</code> bzw. <code>CEST</code> sind die Zeitstempel (für sich genommen) nicht eindeutig. In Dateien, die wir von den BWB bekommen (z.B. Regendaten) würden die Zeitstempel zum Beispiel in dieser Form vorkommen:</p>
<pre><code>28.10.2018 02:15:00
28.10.2018 02:30:00
28.10.2018 02:45:00
28.10.2018 02:00:00
28.10.2018 02:15:00
28.10.2018 02:30:00</code></pre>
<p>Erst aus der Reihenfolge (erstes Auftreten ist CEST, zweites Auftreten ist CET) lässt sich die Zuordnung rekonstruieren. Dies müssen wir beachten, wenn wir die Daten bearbeiten und ich denke, dass wir dies in den seltensten Fällen tun!</p>
<p>Wir sollten eine einheitliche, eindeutige Vorgehensweise entwickeln.</p>
<p><strong>TODO:</strong> Ggf. weitere Beschreibungen in R-Workshop, den ich mal gegeben habe…</p>
<p><strong>Vorschlag:</strong></p>
<ul>
<li>Nach Möglichkeit die Messgeräte so einstellen, dass der ausgegebene Zeitstempel den UTC-Offset enthält. Am besten wäre ein Zeitstempel in einem Format, das die Differenz gegenüber <em>Greenwich Mean Time (GMT)</em> bzw. <em>Coordinated Universal Time (UTC)</em> enthält, wie wir es ggf. aus unseren E-Mail-Programmen oder Terminkalendern kennen: <code>2018-06-01 23:18 GMT+02:00</code>.</li>
<li>Manchmal gibt es auch die Möglichkeit, dass zusätzlich zum lokalen Zeitstempel der UTC-Offset (+01 im Winter und +02 im Sommer) als extra Spalte ausgegeben wird. Von dieser Möglichkeit sollte dann Gebrauch gemacht werden.</li>
<li>Ansonsten empfehlen wir, die Geräte so einzustellen, dass sie die Zeitumstellung nicht mitmachen (also immer die Normalzeit, also Winterzeit, aufzeichnen). Dann sind die Zeitstempel eindeutig. Aufzupassen ist dann allerdings bei der Verarbeitung und Interpretation der Daten, dazu mehr unter <a href="projektbausteine.html#datenimport">Datenimport</a></li>
</ul>
<p><strong>Werkzeuge:</strong></p>
<ul>
<li>KWB-eigenes R-Paket <a href="https://kwb-r.github.io/kwb.datetime/dev"><code>kwb.datetime</code></a>. Dieses enthält unter anderem die Funktionen
<ul>
<li><a href="https://kwb-r.github.io/kwb.datetime/dev/reference/date_range_CEST.html"><code>date_range_CEST()</code></a> zur Ermittlung der Tage, an denen die Zeitumstellung stattfindet.</li>
</ul></li>
</ul>
<p><strong>TODO:</strong></p>
<ul>
<li>Wichtigste Funktionen des Pakets <code>kwb.datetime</code>(z.B. zur Ermittlung der vollständigen Zeitstempel inklusive UTC-Offset aus fortlaufenden lokalen Zeitstempeln) dokumentieren und hier referenzieren.</li>
<li>Sollten wir andere Pakete benutzen und wenn ja, welche? Was bietet z.B. <code>lubridate</code>? Es scheint mir allerdings, dass unsere Problematik im WWW etwas unterbeleuchtet ist.</li>
</ul>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="projektbausteine.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="loesungen.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["fakin_documentation.pdf", "fakin_documentation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
